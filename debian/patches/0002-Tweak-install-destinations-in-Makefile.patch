From: Ian Ferguson <iferguso@genome.wustl.edu>
Date: Mon, 2 Mar 2015 21:20:14 +0100
Subject: [PATCH] Tweak install destinations in Makefile

Use version as suffix for binaries
---
 Makefile |   17 +++++++++++++----
 1 files changed, 13 insertions(+), 4 deletions(-)

diff --git a/Makefile b/Makefile
index e88861c..88262f3 100644
--- a/Makefile
+++ b/Makefile
@@ -45,9 +45,11 @@ OBJS     = main.o vcfindex.o tabix.o \
            ccall.o em.o prob1.o kmin.o # the original samtools calling
 INCLUDES = -I. -I$(HTSDIR)
 
-prefix      = /usr/local
+prefix      = /usr
 exec_prefix = $(prefix)
 bindir      = $(exec_prefix)/bin
+libdir      = $(exec_prefix)/lib/bcftools
+sharedir    = $(prefix)/share/bcftools
 mandir      = $(prefix)/share/man
 man1dir     = $(mandir)/man1
 
@@ -132,10 +134,17 @@ bcftools.html: bcftools.txt
 
 docs: bcftools.html bcftools.1
 
+dest_bindir   = $(DESTDIR)$(bindir)
+dest_libdir   = $(DESTDIR)$(libdir)$(PACKAGE_VERSION)
+dest_sharedir = $(DESTDIR)$(sharedir)$(PACKAGE_VERSION)
+dest_mandir   = $(DESTDIR)$(man1dir)
+
 install: $(PROG)
-	$(INSTALL_DIR) $(DESTDIR)$(bindir) $(DESTDIR)$(man1dir)
-	$(INSTALL_PROGRAM) $(PROG) plot-vcfstats vcfutils.pl $(DESTDIR)$(bindir)
-	$(INSTALL_DATA) bcftools.1 $(DESTDIR)$(man1dir)
+	$(INSTALL_DIR) $(dest_bindir) $(dest_libdir) $(dest_sharedir) $(dest_mandir)
+	$(INSTALL_PROGRAM) -T $(PROG) $(dest_bindir)/$(PROG)$(PACKAGE_VERSION)
+	$(INSTALL_PROGRAM) plot-vcfstats $(dest_libdir)
+	$(INSTALL_PROGRAM) vcfutils.pl $(dest_sharedir)
+	$(INSTALL_DATA) -T bcftools.1 $(dest_mandir)/bcftools$(PACKAGE_VERSION).1
 
 clean: testclean
 	-rm -f gmon.out *.o *~ $(PROG) version.h plugins/*.so
-- 
